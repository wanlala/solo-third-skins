var goTranslate=function(){window.open("http://translate.google.com/translate?sl=auto&tl=auto&u="+location.href)},getNextPage=function(){var c=$(".article-next");currentPage+=1;var e="/articles/";if(1===$("#tag").length)e="/articles/tags/"+(t=location.pathname.split("/"))[t.length-1]+"/";else if(1===$("#archive").length){e="/articles/archives/"+(t=location.pathname.split("/"))[t.length-2]+"/"+t[t.length-1]+"/"}else if(1===$("#author").length){var t;e="/articles/authors/"+(t=location.pathname.split("/"))[t.length-1]+"/"}$.ajax({url:latkeConfig.servePath+e+currentPage,type:"GET",beforeSend:function(){c.css("background","url("+latkeConfig.staticServePath+"/skins/ease/images/ajax-loader.gif) no-repeat scroll center center #fefefe")},success:function(e,t){if(e.sc){for(var a="",i=e.rslts.pagination,n=0;n<e.rslts.articles.length;n++){var r=e.rslts.articles[n],s="";e.rslts.articles.length-1===n&&(s=" article-last"),a+='<li class="article'+s+'"><div class="article-title"><h2><a rel="bookmark" class="ft-gray" href="'+latkeConfig.servePath+r.articlePermalink+'">'+r.articleTitle+"</a>",r.hasUpdated&&(a+="<sup>"+Label.updatedLabel+"</sup>"),r.articlePutTop&&(a+="<sup>"+Label.topArticleLabel+"</sup>"),a+='</h2><div class="right"><a rel="nofollow" class="ft-gray" href="'+latkeConfig.servePath+r.articlePermalink+'#comments">'+ +r.articleCommentCount+"&nbsp;&nbsp;"+Label.commentLabel+'</a>&nbsp;&nbsp;<a rel="nofollow" class="ft-gray" href="'+latkeConfig.servePath+r.articlePermalink+'">'+r.articleViewCount+"&nbsp;&nbsp;"+Label.viewLabel+'</a></div><div class="clear"></div></div><div class="article-body"><div id="abstract'+r.oId+'">'+r.articleAbstract+'</div><div id="content'+r.oId+'" class="none"></div></div><div class="right ft-gray">',r.hasUpdated?a+=Util.toDate(r.articleUpdateTime,"yy-MM-dd HH:mm"):a+=Util.toDate(r.articleCreateTime,"yy-MM-dd HH:mm"),a+=' <a href="'+latkeConfig.servePath+"/authors/"+r.authorId+'">'+r.authorName+'</a></div><div class="left ft-gray">'+Label.tag1Label+" ";for(var l=r.articleTags.split(","),o=0;o<l.length;o++)a+='<a rel="tag" href="'+latkeConfig.servePath+"/tags/"+encodeURIComponent(l[o])+'">'+l[o]+"</a>",o<l.length-1&&(a+=", ");a+='</div><div class="clear"></div></li>'}$(".article-last").removeClass("article-last"),$(".main>.wrapper>ul").append(a),i.paginationPageCount===currentPage?c.remove():c.css("background","none")}}})},ease={$header:$(".header"),headerH:103,$body:$(".main > .wrapper"),$nav:$(".nav"),getCurrentPage:function(){var e=$(".article-next");0<e.length&&(window.currentPage=e.data("page"))},setNavCurrent:function(){$(".nav ul a").each(function(){var e=$(this);e.attr("href")===location.href?e.addClass("current"):/\/[0-9]+$/.test(location.pathname)&&($(".nav ul li")[0].className="current")})},initCommon:function(){Util.init(),Util.replaceSideEm($(".recent-comments-content")),Util.buildTags("tagsSide")},initArchives:function(){var e=$(".archives");if(!(e.length<1)){$(".footer").css("marginTop","30px");for(var i=[],t=e.find("span").each(function(){for(var e=$(this).data("year"),t=!0,a=0;a<i.length;a++)if(e===i[a]){t=!1;break}t&&i.push(e)}),a="",n=0;n<i.length;n++){for(var r="",s=0;s<t.length;s++){var l=$(t[s]);l.data("year")===i[n]&&(r+=l.html())}a+="<div><h3 class='ft-gray'>"+i[n]+"</h3>"+r+"</div>"}e.html(a);for(var o=$(".archives>div"),c=0,h=0,g=[],d=0;d<o.length;d++){for(var f=0;f<3&&!(d>=o.length);f++)o[d].style.left=310*f+"px",g[f]=0<c?(""!==o[d-3].style.top&&(h=parseInt(o[d-3].style.top)),o[d].style.top=$(o[d-3]).height()+60+h+"px",parseInt(o[d].style.top)+$(o[d]).height()+60):$(o[d]).height()+60,f<2&&(d+=1);c+=1}e.height(g.sort()[g.length-1])}},scrollEvent:function(){var n=this;$(window).scroll(function(){var e=$(window).scrollTop(),t=0;if("block"===$("#top").css("display")&&(t=$("#top").height()),e>=n.headerH+t?(n.$nav.css("position","fixed"),n.$body.css("marginTop","55px")):(n.$nav.css("position","inherit"),n.$body.css("marginTop","0")),e>n.headerH){var a=$(window).height(),i=e+a-21;$("body").height()-58<=e+a&&(i=$(".footer").offset().top-21),$("#goTop").fadeIn("slow").css("top",i)}else $("#goTop").hide()})},setDynamic:function(){var e=$(".dynamic");if(!($(".dynamic").length<1)){var t=e.find(".side-comments"),a=e.find(".side-tags"),i=e.find(".side-most-comment"),n=e.find(".side-most-view");t.height()>a.height()?a.height(t.height()):t.height(a.height()),i.height()>n.height()?n.height(i.height()):i.height(n.height()),$(".article-body").each(function(){this.innerHTML=Util.replaceEmString($(this).html())})}},scrollToCmt:function(){1==$(window.location.hash).length&&$(window).scrollTop($(window.location.hash).offset().top-60)}};ease.getCurrentPage(),ease.initCommon(),ease.scrollEvent(),ease.setNavCurrent(),ease.initArchives(),ease.setDynamic();